var list=null;var doc=null;function msgbox(a){$("#error").html(a);$("#displayerror").click()}function dosearch(){try{var a=$("#aic").val().trim();if(a.length==0)throw"Inserire il codice AIC";if(a.charAt(0)=="A")a=a.substr(1);if(a.charAt(0)=="a")a=a.substr(1);var e="";for(var i=0;i<a.length;i++){if("0123456789".indexOf(a.charAt(i))>=0)e+=a.charAt(i);else if(" .-\r\n	".indexOf(a.charAt(i))<0)throw"Codice AIC non valido<br />"+"Deve contenere solo caratteri numerici,<br />"+"puo' avere come carattere iniziale 'A'"}while(e.length<9){e="0"+e}$.ajax({url:"archive",dataType:"json",data:'{ "aic": "'+e+'" }',method:"post",success:function(a){try{if(!a&&a.length<=0)throw"codice AIC "+e+" non trovato";doc=null;list=a;for(var i=0;i<list.length;i++){if(list[i].isDefaultLanguage){doc=list[i];break}}if(!doc||doc==null)doc=list[0];$("#aic").val("");reload();$("#success").click()}catch(o){msgbox(o)}$("#loading-popup").hide()},error:function(a){$("#loading-popup").hide();msgbox("Codice AIC non trovato")}})}catch(o){$("#loading-popup").hide();msgbox(o)}}function reload(){$("#pdfembedded").attr("src","http://docs.google.com/gview?url=pages/"+doc.filename+".pdf&embedded=true");for(var a=0;a<1;a++){$("#lang-it"+"-"+a).css("display","none");$("#lang-de"+"-"+a).css("display","none");$("#lang-en"+"-"+a).css("display","none");$("#lang-es"+"-"+a).css("display","none");$("#lang-fr"+"-"+a).css("display","none");for(var e=0;e<list.length;e++){var i=list[e].language.toLowerCase();try{$("#lang-"+i+"-"+a).css("display","block")}catch(o){}}}}function chlang(a){var e;for(e=0;e<30;e++){$("#page"+e+"file").attr("src","images/loading.gif")}for(e=0;e<list.length;e++){if(list[e].language.toLowerCase()==a){doc=list[e];break}}reload();if($.mobile.activePage.attr("id")=="page0"){$("html, body").animate({scrollTop:0},"slow")}else{$.mobile.changePage("#page0",{allowSamePageTransition:true,transition:"slide",reverse:true})}}function _onload(){$(document).ajaxStart(function(){$("#aic").hide();$("#loading").fadeIn()}).ajaxStop(function(){$("#loading").hide();$("#aic").show()});$("#aic").keypress(function(a){if(a&&a.which&&a.which==13){dosearch()}});if($("#aic").val().trim().length>0){dosearch()}}
